# RFCScope Usage Instructions

## Setup

You must have Python 3.11 or later installed on your system to run RFCScope. Clone this repository and go to the `RFCScope` directory. Then, install the required dependencies:

```bash
pip install -r requirements.txt
```

You may first want to create a virtual environment to avoid conflicts with other projects by running:

```bash
python -m venv .venv
source .venv/bin/activate  # On Windows use `.venv\Scripts\activate`
```

Then, copy the `.env.example` file to `.env` and fill in the `OPENAI_API_KEY` variable with your OpenAI API key. This key is required for running the scripts that interact with OpenAI's endpoints for accessing LLMs. Alternatively, you can directly set the `OPENAI_API_KEY` environment variable in your system or in your shell.

## Running RFCScope

The first step in running _RFCScope_ is to prepare an RFC for analysis by executing the context construction stage. To do this, invoke the following command.

```bash
python stage.py <RFC_NUMBER> <OUTPUT_DIRECTORY>
```

The `<RFC_NUMBER>` is the number of the RFC you want to analyze (e.g., `1234`), and `<OUTPUT_DIRECTORY>` is the directory where the output files will be saved. The following files will be generated in the output directory:

- `references.json`: Contains the information extracted from the references section of the RFC.
- `corpus.json`: Contains the parsed contents of the RFC.
- `section_dependencies.json`: Contains the references made by each section of the RFC, along with metadata about each reference made.

Now, to run the analysis, invoke the following command with the same RFC number and output directory as before. This first runs the partitioner, and then the analyzer and evaluator for both inconsistency and under-specification analyses.

```bash
python run.py <RFC_NUMBER> <OUTPUT_DIRECTORY>
```

This will generate files in the `<OUTPUT_DIRECTORY>/results` directory, which include the prompts provided to the Analyzer and the Evaluator, as well as the responses from these two steps.

Note that if the script fails at any point above, you can rerun the command with the same parameters, and it will continue from where it left off due to caching mechanisms in place.

A sample has been provided in the `sample` directory, which was generated by running `python run.py 9619 sample`.
